openapi: 3.0.1
info:
  title: dati-registri
  description: Servizio dati registri RENTRI
  termsOfService: https://www.rentri.gov.it
  contact:
    email: techref@rentri.it
  version: 1.0.20250114-613
  x-summary: Servizio dati registri RENTRI
  x-api-id: rentrigov.movimenti
servers:
- url: https://demoapi.rentri.gov.it/dati-registri/v1.0
  description: Demo
paths:
  /{identificativo_registro}/last-transazione-id:
    get:
      summary: Riferimento ultima transazione
      description: Ritorna il riferimento generato dal sistema relativo all'ultima trasmissione delle registrazioni per il Registro specificato.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro.
        required: true
        schema:
          type: string
      responses:
        200:
          description: Riferimento relativo all'ultima transazione.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransazioneModel'
        403:
          description: Operazione non consentita sul Registro.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /{transazione_id}/result:
    get:
      summary: Esito transazione
      description: Ottiene l'esito dell'elaborazione di una richiesta di trasmissione registrazioni.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: transazione_id
        in: path
        description: Id della richiesta
        required: true
        schema:
          type: string
          format: uuid
      responses:
        200:
          description: Esito dell'elaborazione con eventuali errori.
          content:
            application/json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/EsitoMovimentiModel'
                - $ref: '#/components/schemas/EsitoValidaRegistroModel'
        400:
          description: Richiesta non ancora elaborata.
        403:
          description: Operazione non consentita.
        404:
          description: Richiesta non trovata.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /{transazione_id}/status:
    get:
      summary: Stato transazione
      description: Ottiene lo stato di elaborazione di una richiesta di trasmissione registrazioni.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: transazione_id
        in: path
        description: Id della richiesta.
        required: true
        schema:
          type: string
          format: uuid
      responses:
        200:
          description: Richiesta non ancora elaborata.
        303:
          description: La richiesta è stata elaborata e l'URL per il recupero dell'esito si trova nell'header Location.
          headers:
            Location:
              description: URL per verificare lo stato dell'elaborazione.
              schema:
                type: string
                description: URL per verificare lo stato dell'elaborazione.
                format: ''
        400:
          description: Bad Request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        403:
          description: Operazione non consentita.
        404:
          description: Richiesta non trovata.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /operatore/{identificativo_registro}/movimenti:
    get:
      tags:
      - Operatore
      summary: Elenco registrazioni
      description: >-
        Ottiene l'elenco delle registrazioni relative ad un Registro, filtrate in base ai criteri specificati.


        Specificando un valore per il filtro "allaData", si ottiene l'elenco delle registrazioni trasmesse fino a quella data.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: identificativi_movimento
        in: query
        schema:
          type: array
          items:
            type: string
      - name: anno
        in: query
        schema:
          maximum: 2050
          minimum: 1980
          type: integer
          format: int32
      - name: progressivo
        in: query
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
      - name: alla_data
        in: query
        description: Data di validità (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: anno_data_registrazione
        in: query
        schema:
          type: integer
          format: int32
      - name: data_registrazione_da
        in: query
        description: Dalla data (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: data_registrazione_a
        in: query
        description: Alla data (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: causali_operazione
        in: query
        schema:
          type: array
          items:
            $ref: '#/components/schemas/CausaliOperazione'
      - name: codice_eer
        in: query
        schema:
          maxLength: 8
          type: string
      - name: caratteristiche_pericolo
        in: query
        schema:
          type: array
          items:
            $ref: '#/components/schemas/CaratteristichePericolo'
      - name: stato_fisico
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/StatiFisici'
      - name: unita_misura
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/UnitaMisura'
      - name: stato_esito_conferimento
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/StatiEsitoConferimento'
      - name: annullato
        in: query
        schema:
          type: boolean
      - name: rettificato
        in: query
        schema:
          type: boolean
      - name: incompleto
        in: query
        schema:
          type: boolean
      - name: Paging-Page
        in: header
        description: Valore per l'header Paging-Page.
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
          default: 1
      - name: Paging-PageSize
        in: header
        description: Valore per l'header Paging-PageSize.
        schema:
          maximum: 1000
          minimum: 1
          type: integer
          format: int32
          default: 100
      responses:
        200:
          description: Elenco delle registrazioni correnti al momento indicato corrispondenti ai criteri di ricerca specificati.
          headers:
            Paging-PageCount:
              description: Numero totale di pagine.
              schema:
                type: integer
                description: Numero totale di pagine.
                format: $int32
            Paging-Page:
              description: Numero di pagina.
              schema:
                type: integer
                description: Numero di pagina.
                format: $int32
            Paging-PageSize:
              description: Dimensione della pagina.
              schema:
                type: integer
                description: Dimensione della pagina.
                format: $int32
            Paging-TotalRecordCount:
              description: Numero totale di record.
              schema:
                type: integer
                description: Numero totale di record.
                format: $int32
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DatiMovimentoModel'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro non trovato.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
    post:
      tags:
      - Operatore
      summary: "\U0001F501[ASYNC] Trasmissione delle registrazioni"
      description: >-
        Acquisisce la richiesta di trasmissione di registrazioni (nuove, rettifiche, annullamenti) relative ad un Registro.


        Con l'identificativo della transazione restituito è possibile consultare lo stato di avanzamento dell'elaborazione e richiederne l'esito.


        Ogni richiesta accetta un numero massimo di 1000 registrazioni.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre un codice di stato 422) anche in ambiente di produzione.</i><hr/><br/>Se viene specificato un URL nell'header X-ReplyTo, al termine dell'elaborazione dei dati, il fruitore riceverà una notifica con l'esito dell'elaborazione all'URL specificato.
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro a cui fanno riferimento le registrazioni.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: X-ReplyTo
        in: header
        description: URL a cui il fruitore riceverà la notifica al termine dell'elaborazione (modalità push).
        schema:
          type: string
      requestBody:
        description: Elenco delle registrazioni (nuove, rettifiche, annullamenti).
        content:
          application/json:
            schema:
              maxItems: 1000
              minItems: 1
              type: array
              items:
                oneOf:
                - $ref: '#/components/schemas/MovimentoModel'
                - $ref: '#/components/schemas/AnnullamentoMovimentoModel'
                description: Dati della registrazione
        required: true
      responses:
        202:
          description: Richiesta accettata e identificativo della transazione.
          headers:
            Location:
              description: URL per verificare lo stato dell'elaborazione. Restituito solo se non viene specificata una URL di callback nell'header X-ReplyTo.
              schema:
                type: string
                description: URL per verificare lo stato dell'elaborazione.
                format: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransazioneModel'
        400:
          description: Dettaglio degli errori di validazione in caso di modello dati non valido.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro non trovato.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
      callbacks:
        Trasmissione delle registrazioni:
          https://example.com:
            post:
              summary: URL di callback
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/EsitoMovimentiModel'
              responses:
                200:
                  description: Il fruitore restituisce questo Status Code in caso di avvenuta ricezione.
                400:
                  description: Il fruitore restituisce questo Status Code in caso di formato non corretto della richiesta.
                500:
                  description: Il fruitore restituisce questo Status Code in caso di errori non dipendenti dalla richiesta.
  /operatore/{identificativo_registro}/movimenti/count:
    get:
      tags:
      - Operatore
      summary: Conteggio registrazioni
      description: >-
        Ottiene il conteggio delle registrazioni relative associate ad un Registro, filtrate in base ai criteri specificati.


        Specificando un valore per il filtro "allaData", si ottiene il conteggio delle registrazioni trasmesse fino a quella data.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: identificativi_movimento
        in: query
        schema:
          type: array
          items:
            type: string
      - name: anno
        in: query
        schema:
          maximum: 2050
          minimum: 1980
          type: integer
          format: int32
      - name: progressivo
        in: query
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
      - name: alla_data
        in: query
        description: Data di validità (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: anno_data_registrazione
        in: query
        schema:
          type: integer
          format: int32
      - name: data_registrazione_da
        in: query
        description: Dalla data (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: data_registrazione_a
        in: query
        description: Alla data (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: causali_operazione
        in: query
        schema:
          type: array
          items:
            $ref: '#/components/schemas/CausaliOperazione'
      - name: codice_eer
        in: query
        schema:
          maxLength: 8
          type: string
      - name: caratteristiche_pericolo
        in: query
        schema:
          type: array
          items:
            $ref: '#/components/schemas/CaratteristichePericolo'
      - name: stato_fisico
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/StatiFisici'
      - name: unita_misura
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/UnitaMisura'
      - name: stato_esito_conferimento
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/StatiEsitoConferimento'
      - name: annullato
        in: query
        schema:
          type: boolean
      - name: rettificato
        in: query
        schema:
          type: boolean
      - name: incompleto
        in: query
        schema:
          type: boolean
      responses:
        200:
          description: Conteggio delle registrazioni correnti al momento indicato corrispondenti ai criteri di ricerca specificati.
          content:
            application/json:
              schema:
                type: integer
                format: int32
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro non trovato.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /operatore/{identificativo_registro}/movimento/{anno}/{progressivo}:
    get:
      tags:
      - Operatore
      summary: Dettaglio registrazione per anno e numero
      description: >-
        Ottiene il dettaglio di una registrazione specificando anno/numero registrazione.


        Specificando un valore per il filtro "allaData", si ottiene il dettaglio della registrazione a quella data.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: anno
        in: path
        description: Anno della registrazione da recuperare.
        required: true
        schema:
          maximum: 2050
          minimum: 1980
          type: integer
          format: int32
      - name: progressivo
        in: path
        description: Progressivo della registrazione da recuperare.
        required: true
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
      - name: alla_data
        in: query
        description: Data di validità dei dati (formato ISO 8601 UTC).
        schema:
          type: string
          format: date-time
      - name: variazioni
        in: query
        description: Indica se recuperare anche la storia della registrazione (tutte le sue variazioni).
        schema:
          type: boolean
          default: true
      responses:
        200:
          description: Dettaglio della registrazione (ed eventuale lista di tutte le sue variazioni) riferita al momento indicato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MovimentoDettaglioModel'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro o registrazione non trovata.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /operatore/{identificativo_registro}/movimento/{identificativo_movimento}:
    get:
      tags:
      - Operatore
      summary: Dettaglio registrazione per identificativo
      description: >-
        Ottiene il dettaglio di una registrazione specificando l'identificativo assegnato dal RENTRI al momento della trasmissione.


        Specificando un valore per il filtro "allaData", si ottiene il dettaglio della registrazione a quella data.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: identificativo_movimento
        in: path
        description: Identificativo della registrazione da recuperare.
        required: true
        schema:
          maxLength: 20
          pattern: ^M[0-9A-Z]{19}$
          type: string
      - name: alla_data
        in: query
        description: Data di validità dei dati (formato ISO 8601 UTC).
        schema:
          type: string
          format: date-time
      - name: variazioni
        in: query
        description: Indica se recuperare anche la storia della registrazione (tutte le sue variazioni).
        schema:
          type: boolean
          default: true
      responses:
        200:
          description: Dettaglio della registrazione (ed eventuale lista di tutte le sue variazioni) riferita al momento indicato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MovimentoDettaglioModel'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro o registrazione non trovata.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /operatore/{identificativo_registro}/valida:
    post:
      tags:
      - Operatore
      summary: "\U0001F501[ASYNC] Verifica il registro informatico locale"
      description: >-
        Esegue la validazione strutturale del registro cronologico di carico e scarico digitale in formato XML secondo le specifiche tecniche.


        Viene eseguita la validazione XSD e tutte le validazioni applicate nella trasmissione delle registrazioni al RENTRI ad esclusione delle validazioni 

        in fase di elaborazione elencate in <i>/docs?page=registro-digitale#4-2-validazioni-aggiuntive-in-fase-di-elaborazione</i>.


        Inoltre esegue il test di corrispondenza tra la versione locale e i dati già trasmessi al RENTRI.


        Acquisisce la richiesta e fornisce in modo asincrono l’esito contenente alcune informazioni estrapolate dal file e la lista dei problemi di validazione divisi in 2 livelli: 

        <i>Errore</i> (problemi di validazione) e <i>Avvertimento</i> (problemi di non corrispondenza dei dati con quelli già trasmessi al RENTRI).


        <hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre un codice di stato 422) anche in ambiente di produzione.</i><hr/><br/>Se viene specificato un URL nell'header X-ReplyTo, al termine dell'elaborazione dei dati, il fruitore riceverà una notifica con l'esito dell'elaborazione all'URL specificato.
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro a cui fanno riferimento le registrazioni.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: X-ReplyTo
        in: header
        description: URL a cui il fruitore riceverà la notifica al termine dell'elaborazione (modalità push).
        schema:
          type: string
      requestBody:
        description: Modello con il file XML da validare. E' permesso anche l'invio di un file xml zippato.
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/ValidaRegistroRequest'
              description: Richiesta per la validazione strutturale del registro cronologico di carico e scarico digitale in formato XML
        required: true
      responses:
        202:
          description: Richiesta accettata e identificativo della transazione.
          headers:
            Location:
              description: URL per verificare lo stato dell'elaborazione. Restituito solo se non viene specificata una URL di callback nell'header X-ReplyTo.
              schema:
                type: string
                description: URL per verificare lo stato dell'elaborazione.
                format: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransazioneModel'
        400:
          description: Dettaglio degli errori di validazione in caso di modello dati non valido.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro non trovato.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
      callbacks:
        Verifica il registro informatico locale:
          https://example.com:
            post:
              summary: URL di callback
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/EsitoValidaRegistroModel'
              responses:
                200:
                  description: Il fruitore restituisce questo Status Code in caso di avvenuta ricezione.
                400:
                  description: Il fruitore restituisce questo Status Code in caso di formato non corretto della richiesta.
                500:
                  description: Il fruitore restituisce questo Status Code in caso di errori non dipendenti dalla richiesta.
  /operatore/transazioni/movimenti/{num_iscr_sito}:
    get:
      tags:
      - Operatore
      summary: Elenco transazioni
      description: Ottiene l'elenco delle transazioni associate alle richieste di trasmissione delle registrazioni, realtive ad un'unità locale.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: num_iscr_sito
        in: path
        description: Numero iscrizione unità locale rilasciato all'iscrizione.
        required: true
        schema:
          type: string
      - name: identificativo_registro
        in: query
        description: Identificativo del Registro.
        schema:
          type: string
      - name: anno
        in: query
        description: Anno di riferimento.
        schema:
          type: integer
          format: int32
      - name: identificativo_transazione
        in: query
        description: Identificativo della transazione.
        schema:
          type: string
          format: uuid
      - name: sorgente
        in: query
        description: Sorgente della transazione.
        schema:
          allOf:
          - $ref: '#/components/schemas/SorgenteTransazione'
      - name: solo_esito_positivo
        in: query
        description: Indica se recuperare solamente le transazioni che hanno avuto esito positivo.
        schema:
          type: boolean
      - name: Paging-Page
        in: header
        description: Valore per l'header Paging-Page.
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
          default: 1
      - name: Paging-PageSize
        in: header
        description: Valore per l'header Paging-PageSize.
        schema:
          maximum: 1000
          minimum: 1
          type: integer
          format: int32
          default: 100
      responses:
        200:
          description: Elenco delle transazioni relative all'unità locale e corrispondenti ai criteri di ricerca specificati.
          headers:
            Paging-PageCount:
              description: Numero totale di pagine.
              schema:
                type: integer
                description: Numero totale di pagine.
                format: $int32
            Paging-Page:
              description: Numero di pagina.
              schema:
                type: integer
                description: Numero di pagina.
                format: $int32
            Paging-PageSize:
              description: Dimensione della pagina.
              schema:
                type: integer
                description: Dimensione della pagina.
                format: $int32
            Paging-TotalRecordCount:
              description: Numero totale di record.
              schema:
                type: integer
                description: Numero totale di record.
                format: $int32
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/InfoTransazioneModel'
        403:
          description: Operazione non consentita.
        404:
          description: Operatore o unità locale non trovati.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /operatore/transazioni/movimenti/{num_iscr_sito}/{identificativo_transazione}:
    get:
      tags:
      - Operatore
      summary: Dettaglio transazione
      description: Ottiene il dettaglio di una transazione specificando l'identificativo.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: num_iscr_sito
        in: path
        description: Numero iscrizione unità locale rilasciato all'iscrizione.
        required: true
        schema:
          type: string
      - name: identificativo_transazione
        in: path
        description: Identificativo della transazione da recuperare.
        required: true
        schema:
          type: string
          format: uuid
      responses:
        200:
          description: Dettaglio della transazione.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InfoTransazioneDettaglioModel'
        403:
          description: Operazione non consentita.
        404:
          description: Operatore, unità locale o transazione non trovati.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /operatore/transazioni/movimenti/{num_iscr_sito}/{identificativo_transazione}/request:
    get:
      tags:
      - Operatore
      summary: Request transazione
      description: Ottiene la request associata alla transazione specificata.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: num_iscr_sito
        in: path
        description: Numero iscrizione unità locale rilasciato all'iscrizione.
        required: true
        schema:
          type: string
      - name: identificativo_transazione
        in: path
        description: Identificativo della transazione.
        required: true
        schema:
          type: string
          format: uuid
      responses:
        200:
          description: Request associata alla transazione.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransazioneRequestModel'
        403:
          description: Operazione non consentita.
        404:
          description: Operatore, unità locale o transazione non trovati.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /soggetto-delegato/{identificativo_registro}/movimenti:
    get:
      tags:
      - Soggetto delegato
      summary: Elenco registrazioni
      description: >-
        Ottiene l'elenco delle registrazioni relative ad un Registro, filtrate in base ai criteri specificati.


        Specificando un valore per il filtro "allaData", si ottiene l'elenco delle registrazioni trasmesse fino a quella data.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: identificativi_movimento
        in: query
        schema:
          type: array
          items:
            type: string
      - name: anno
        in: query
        schema:
          maximum: 2050
          minimum: 1980
          type: integer
          format: int32
      - name: progressivo
        in: query
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
      - name: alla_data
        in: query
        description: Data di validità (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: anno_data_registrazione
        in: query
        schema:
          type: integer
          format: int32
      - name: data_registrazione_da
        in: query
        description: Dalla data (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: data_registrazione_a
        in: query
        description: Alla data (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: causali_operazione
        in: query
        schema:
          type: array
          items:
            $ref: '#/components/schemas/CausaliOperazione'
      - name: codice_eer
        in: query
        schema:
          maxLength: 8
          type: string
      - name: caratteristiche_pericolo
        in: query
        schema:
          type: array
          items:
            $ref: '#/components/schemas/CaratteristichePericolo'
      - name: stato_fisico
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/StatiFisici'
      - name: unita_misura
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/UnitaMisura'
      - name: stato_esito_conferimento
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/StatiEsitoConferimento'
      - name: annullato
        in: query
        schema:
          type: boolean
      - name: rettificato
        in: query
        schema:
          type: boolean
      - name: incompleto
        in: query
        schema:
          type: boolean
      - name: Paging-Page
        in: header
        description: Valore per l'header Paging-Page.
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
          default: 1
      - name: Paging-PageSize
        in: header
        description: Valore per l'header Paging-PageSize.
        schema:
          maximum: 1000
          minimum: 1
          type: integer
          format: int32
          default: 100
      responses:
        200:
          description: Elenco delle registrazioni correnti al momento indicato corrispondenti ai criteri di ricerca specificati.
          headers:
            Paging-PageCount:
              description: Numero totale di pagine.
              schema:
                type: integer
                description: Numero totale di pagine.
                format: $int32
            Paging-Page:
              description: Numero di pagina.
              schema:
                type: integer
                description: Numero di pagina.
                format: $int32
            Paging-PageSize:
              description: Dimensione della pagina.
              schema:
                type: integer
                description: Dimensione della pagina.
                format: $int32
            Paging-TotalRecordCount:
              description: Numero totale di record.
              schema:
                type: integer
                description: Numero totale di record.
                format: $int32
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DatiMovimentoModel'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro non trovato.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
    post:
      tags:
      - Soggetto delegato
      summary: "\U0001F501[ASYNC] Trasmissione delle registrazioni"
      description: >-
        Acquisisce la richiesta di trasmissione di registrazioni (nuove, rettifiche, annullamenti) relative ad un Registro.


        Con l'identificativo della transazione restituito è possibile consultare lo stato di avanzamento dell'elaborazione e richiederne l'esito.


        Ogni richiesta accetta un numero massimo di 1000 registrazioni.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre un codice di stato 422) anche in ambiente di produzione.</i><hr/><br/>Se viene specificato un URL nell'header X-ReplyTo, al termine dell'elaborazione dei dati, il fruitore riceverà una notifica con l'esito dell'elaborazione all'URL specificato.
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro a cui fanno riferimento le registrazioni.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: X-ReplyTo
        in: header
        description: URL a cui il fruitore riceverà la notifica al termine dell'elaborazione (modalità push).
        schema:
          type: string
      requestBody:
        description: Elenco delle registrazioni (nuovi, rettifiche, annullamenti).
        content:
          application/json:
            schema:
              maxItems: 1000
              minItems: 1
              type: array
              items:
                oneOf:
                - $ref: '#/components/schemas/MovimentoModel'
                - $ref: '#/components/schemas/AnnullamentoMovimentoModel'
                description: Dati della registrazione
        required: true
      responses:
        202:
          description: Richiesta accettata e identificativo della transazione.
          headers:
            Location:
              description: URL per verificare lo stato dell'elaborazione. Restituito solo se non viene specificata una URL di callback nell'header X-ReplyTo.
              schema:
                type: string
                description: URL per verificare lo stato dell'elaborazione.
                format: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransazioneModel'
        400:
          description: Dettaglio degli errori di validazione in caso di modello dati non valido.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro non trovato.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
      callbacks:
        Trasmissione delle registrazioni:
          https://example.com:
            post:
              summary: URL di callback
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/EsitoMovimentiModel'
              responses:
                200:
                  description: Il fruitore restituisce questo Status Code in caso di avvenuta ricezione.
                400:
                  description: Il fruitore restituisce questo Status Code in caso di formato non corretto della richiesta.
                500:
                  description: Il fruitore restituisce questo Status Code in caso di errori non dipendenti dalla richiesta.
  /soggetto-delegato/{identificativo_registro}/movimenti/count:
    get:
      tags:
      - Soggetto delegato
      summary: Conteggio registrazioni
      description: >-
        Ottiene il conteggio delle registrazioni relative associate ad un Registro, filtrate in base ai criteri specificati.


        Specificando un valore per il filtro "allaData", si ottiene il conteggio delle registrazioni trasmesse fino a quella data.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: identificativi_movimento
        in: query
        schema:
          type: array
          items:
            type: string
      - name: anno
        in: query
        schema:
          maximum: 2050
          minimum: 1980
          type: integer
          format: int32
      - name: progressivo
        in: query
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
      - name: alla_data
        in: query
        description: Data di validità (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: anno_data_registrazione
        in: query
        schema:
          type: integer
          format: int32
      - name: data_registrazione_da
        in: query
        description: Dalla data (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: data_registrazione_a
        in: query
        description: Alla data (formato ISO 8601 UTC)
        schema:
          type: string
          format: date-time
      - name: causali_operazione
        in: query
        schema:
          type: array
          items:
            $ref: '#/components/schemas/CausaliOperazione'
      - name: codice_eer
        in: query
        schema:
          maxLength: 8
          type: string
      - name: caratteristiche_pericolo
        in: query
        schema:
          type: array
          items:
            $ref: '#/components/schemas/CaratteristichePericolo'
      - name: stato_fisico
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/StatiFisici'
      - name: unita_misura
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/UnitaMisura'
      - name: stato_esito_conferimento
        in: query
        schema:
          allOf:
          - $ref: '#/components/schemas/StatiEsitoConferimento'
      - name: annullato
        in: query
        schema:
          type: boolean
      - name: rettificato
        in: query
        schema:
          type: boolean
      - name: incompleto
        in: query
        schema:
          type: boolean
      responses:
        200:
          description: Conteggio delle registrazioni correnti al momento indicato corrispondenti ai criteri di ricerca specificati.
          content:
            application/json:
              schema:
                type: integer
                format: int32
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro non trovato.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /soggetto-delegato/{identificativo_registro}/movimento/{anno}/{progressivo}:
    get:
      tags:
      - Soggetto delegato
      summary: Dettaglio registrazione per anno e numero
      description: >-
        Ottiene il dettaglio di una registrazione specificando anno/numero registrazione.


        Specificando un valore per il filtro "allaData", si ottiene il dettaglio della registrazione a quella data.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: anno
        in: path
        description: Anno della registrazione da recuperare.
        required: true
        schema:
          maximum: 2050
          minimum: 1980
          type: integer
          format: int32
      - name: progressivo
        in: path
        description: Progressivo della registrazione da recuperare.
        required: true
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
      - name: alla_data
        in: query
        description: Data di validità dei dati (formato ISO 8601 UTC).
        schema:
          type: string
          format: date-time
      - name: variazioni
        in: query
        description: Indica se recuperare anche la storia della registrazione (tutte le sue variazioni).
        schema:
          type: boolean
          default: true
      responses:
        200:
          description: Dettaglio della registrazione (ed eventuale lista di tutte le sue variazioni) riferita al momento indicato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MovimentoDettaglioModel'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro o registrazione non trovata.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /soggetto-delegato/{identificativo_registro}/movimento/{identificativo_movimento}:
    get:
      tags:
      - Soggetto delegato
      summary: Dettaglio registrazione per identificativo
      description: >-
        Ottiene il dettaglio di una registrazione specificando l'identificativo assegnato dal RENTRI al momento della trasmissione.


        Specificando un valore per il filtro "allaData", si ottiene il dettaglio della registrazione a quella data.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: identificativo_movimento
        in: path
        description: Identificativo della registrazione da recuperare.
        required: true
        schema:
          maxLength: 20
          pattern: ^M[0-9A-Z]{19}$
          type: string
      - name: alla_data
        in: query
        description: Data di validità dei dati (formato ISO 8601 UTC).
        schema:
          type: string
          format: date-time
      - name: variazioni
        in: query
        description: Indica se recuperare anche la storia della registrazione (tutte le sue variazioni).
        schema:
          type: boolean
          default: true
      responses:
        200:
          description: Dettaglio della registrazione (ed eventuale lista di tutte le sue variazioni) riferita al momento indicato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MovimentoDettaglioModel'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro o registrazione non trovata.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /soggetto-delegato/{identificativo_registro}/valida:
    post:
      tags:
      - Soggetto delegato
      summary: "\U0001F501[ASYNC] Verifica il registro informatico locale"
      description: >-
        Esegue la validazione strutturale del registro cronologico di carico e scarico digitale in formato XML secondo le specifiche tecniche.


        Viene eseguita la validazione XSD e tutte le validazioni applicate nella trasmissione delle registrazioni al RENTRI ad  esclusione delle validazioni 

        in fase di elaborazione elencate in <i>/docs?page=registro-digitale#4-2-validazioni-aggiuntive-in-fase-di-elaborazione</i>.


        Inoltre esegue il test di corrispondenza tra la versione locale e i dati già trasmessi al RENTRI.


        Acquisisce la richiesta e fornisce in modo asincrono l’esito contenente alcune informazioni estrapolate dal file e la lista dei problemi di validazione divisi in 2 livelli: 

        <i>Errore</i> (problemi di validazione) e <i>Avvertimento</i> (problemi di non corrispondenza dei dati con quelli già trasmessi al RENTRI).


        <hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre un codice di stato 422) anche in ambiente di produzione.</i><hr/><br/>Se viene specificato un URL nell'header X-ReplyTo, al termine dell'elaborazione dei dati, il fruitore riceverà una notifica con l'esito dell'elaborazione all'URL specificato.
      parameters:
      - name: identificativo_registro
        in: path
        description: Identificativo del Registro a cui fanno riferimento le registrazioni.
        required: true
        schema:
          maxLength: 11
          pattern: ^R[0-9A-Z]{10}$
          type: string
      - name: X-ReplyTo
        in: header
        description: URL a cui il fruitore riceverà la notifica al termine dell'elaborazione (modalità push).
        schema:
          type: string
      requestBody:
        description: Modello con il file XML da validare. E' permesso anche l'invio di un file XML zippato.
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/ValidaRegistroRequest'
              description: Richiesta per la validazione strutturale del registro cronologico di carico e scarico digitale in formato XML
        required: true
      responses:
        202:
          description: Richiesta accettata e identificativo della transazione.
          headers:
            Location:
              description: URL per verificare lo stato dell'elaborazione. Restituito solo se non viene specificata una URL di callback nell'header X-ReplyTo.
              schema:
                type: string
                description: URL per verificare lo stato dell'elaborazione.
                format: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransazioneModel'
        400:
          description: Dettaglio degli errori di validazione in caso di modello dati non valido.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        403:
          description: Operazione non consentita sul Registro.
        404:
          description: Registro non trovato.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
      callbacks:
        Verifica il registro informatico locale:
          https://example.com:
            post:
              summary: URL di callback
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/EsitoValidaRegistroModel'
              responses:
                200:
                  description: Il fruitore restituisce questo Status Code in caso di avvenuta ricezione.
                400:
                  description: Il fruitore restituisce questo Status Code in caso di formato non corretto della richiesta.
                500:
                  description: Il fruitore restituisce questo Status Code in caso di errori non dipendenti dalla richiesta.
  /soggetto-delegato/{num_iscr_ass}/transazioni/movimenti/{num_iscr_sito}:
    get:
      tags:
      - Soggetto delegato
      summary: Elenco transazioni
      description: Ottiene l'elenco delle transazioni associate alle richieste di trasmissione delle registrazioni, realtive ad un'unità locale gestita da un soggetto delegato.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: num_iscr_ass
        in: path
        description: Numero iscrizione soggetto delegato rilasciato all'iscrizione.
        required: true
        schema:
          type: string
      - name: num_iscr_sito
        in: path
        description: Numero iscrizione unità locale rilasciato all'iscrizione.
        required: true
        schema:
          type: string
      - name: identificativo_registro
        in: query
        description: Identificativo del Registro.
        schema:
          type: string
      - name: anno
        in: query
        description: Anno di riferimento.
        schema:
          type: integer
          format: int32
      - name: identificativo_transazione
        in: query
        description: Identificativo della transazione.
        schema:
          type: string
          format: uuid
      - name: sorgente
        in: query
        description: Sorgente della transazione.
        schema:
          allOf:
          - $ref: '#/components/schemas/SorgenteTransazione'
      - name: solo_esito_positivo
        in: query
        description: Indica se recuperare solamente le transazioni che hanno avuto esito positivo.
        schema:
          type: boolean
      - name: Paging-Page
        in: header
        description: Valore per l'header Paging-Page.
        schema:
          maximum: 2147483647
          minimum: 1
          type: integer
          format: int32
          default: 1
      - name: Paging-PageSize
        in: header
        description: Valore per l'header Paging-PageSize.
        schema:
          maximum: 1000
          minimum: 1
          type: integer
          format: int32
          default: 100
      responses:
        200:
          description: Elenco delle transazioni relative all'unità locale e corrispondenti ai criteri di ricerca specificati.
          headers:
            Paging-PageCount:
              description: Numero totale di pagine.
              schema:
                type: integer
                description: Numero totale di pagine.
                format: $int32
            Paging-Page:
              description: Numero di pagina.
              schema:
                type: integer
                description: Numero di pagina.
                format: $int32
            Paging-PageSize:
              description: Dimensione della pagina.
              schema:
                type: integer
                description: Dimensione della pagina.
                format: $int32
            Paging-TotalRecordCount:
              description: Numero totale di record.
              schema:
                type: integer
                description: Numero totale di record.
                format: $int32
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/InfoTransazioneModel'
        403:
          description: Operazione non consentita.
        404:
          description: Operatore o unità locale non trovati.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /soggetto-delegato/{num_iscr_ass}/transazioni/movimenti/{num_iscr_sito}/{identificativo_transazione}:
    get:
      tags:
      - Soggetto delegato
      summary: Dettaglio transazione
      description: Ottiene il dettaglio di una transazione specificando l'identificativo.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: num_iscr_ass
        in: path
        description: Numero iscrizione soggetto delegato rilasciato all'iscrizione.
        required: true
        schema:
          type: string
      - name: num_iscr_sito
        in: path
        description: Numero iscrizione unità locale rilasciato all'iscrizione.
        required: true
        schema:
          type: string
      - name: identificativo_transazione
        in: path
        description: Identificativo della transazione da recuperare.
        required: true
        schema:
          type: string
          format: uuid
      responses:
        200:
          description: Dettaglio della transazione.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InfoTransazioneDettaglioModel'
        403:
          description: Operazione non consentita.
        404:
          description: Operatore, unità locale o transazione non trovati.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /soggetto-delegato/{num_iscr_ass}/transazioni/movimenti/{num_iscr_sito}/{identificativo_transazione}/request:
    get:
      tags:
      - Soggetto delegato
      summary: Request transazione
      description: Ottiene la request associata alla transazione specificata.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre una risposta vuota) anche in ambiente di produzione.</i><hr/>
      parameters:
      - name: num_iscr_ass
        in: path
        description: Numero iscrizione soggetto delegato rilasciato all'iscrizione.
        required: true
        schema:
          type: string
      - name: num_iscr_sito
        in: path
        description: Numero iscrizione unità locale rilasciato all'iscrizione.
        required: true
        schema:
          type: string
      - name: identificativo_transazione
        in: path
        description: Identificativo della transazione.
        required: true
        schema:
          type: string
          format: uuid
      responses:
        200:
          description: Request associata alla transazione.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransazioneRequestModel'
        403:
          description: Operazione non consentita.
        404:
          description: Operatore, unità locale o transazione non trovati.
        500:
          description: Errore non gestito (contattare l'assistenza).
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
  /status:
    get:
      summary: Stato API
      description: Verifica dello stato dell'API.<hr/><i>Servizio richiamabile in modalità <b>STUB</b> (le richieste restituiranno sempre un codice di stato 422) anche in ambiente di produzione.</i><hr/>
      responses:
        200:
          description: OK
        500:
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        429:
          description: Troppe richieste. Questa risposta viene restituita quando vengono rilevate più di 100 richieste in 5s, in caso occorre attendere 10s per effettuare una nuova richiesta.
          headers:
            Retry-After:
              description: Indica quanto tempo il fruitore deve attendere prima di effettuare una nuova richiesta.
              schema:
                  type: string
components:
  schemas:
    AnnoProgressivoMovimentoModel:
      title: AnnoProgressivoMovimentoModel
      required:
      - anno
      - progressivo
      type: object
      allOf:
      - $ref: '#/components/schemas/IdentificativoMovimentoBaseModel'
      properties:
        anno:
          maximum: 2050
          minimum: 1980
          type: integer
          description: Anno di riferimento della registrazione
          format: int32
        progressivo:
          maximum: 2147483647
          minimum: 1
          type: integer
          description: Progressivo della registrazione
          format: int32
      description: Dati di identificazione della registrazione tramite anno di riferimento e progressivo (da utilizzare in alternativa a identificativo rilasciato dal RENTRI)
    AnnullamentoMovimentoModel:
      title: AnnullamentoMovimentoModel
      required:
      - annotazioni
      - data_ora_registrazione
      - numero_registrazione
      - numero_registrazione_annullata
      type: object
      allOf:
      - $ref: '#/components/schemas/OperazioneMovimentoBaseModel'
      properties:
        numero_registrazione:
          title: AnnoProgressivoMovimentoModel
          allOf:
          - $ref: '#/components/schemas/AnnoProgressivoMovimentoModel'
          description: Numero registrazione della rettifica di annullamento tramite anno di riferimento e progressivo
        data_ora_registrazione:
          type: string
          description: >-
            Data di registrazione (formato ISO 8601 UTC) dell'annullamento come previsto nel modello di registro RENTRI.

            Trattandosi di una registrazione informatica, è consentito indicare l'ora, anche se non obbligatoria.


            <b>Esempi:</b> solo data = "2024-01-01", data con ora = "2024-01-01T12:00:00Z"
          format: date-time
        numero_registrazione_annullata:
          oneOf:
          - $ref: '#/components/schemas/AnnoProgressivoMovimentoModel'
          - $ref: '#/components/schemas/IdentificativoMovimentoModel'
          description: Numero registrazione della registrazione da annullare
        annotazioni:
          maxLength: 500
          minLength: 1
          type: string
          description: Annotazioni contenenti il motivo dell'annullamento
      description: Annullamento registrazione
    CaratteristichePericolo:
      enum:
      - HP01
      - HP02
      - HP03
      - HP04
      - HP05
      - HP06
      - HP07
      - HP08
      - HP09
      - HP10
      - HP11
      - HP12
      - HP13
      - HP14
      - HP15
      type: string
    CategorieAee:
      enum:
      - Cat1
      - Cat2
      - Cat3
      - Cat4
      - Cat5
      - Cat6
      - PF
      type: string
    CausaliOperazione:
      enum:
      - DT
      - NP
      - T*
      - RE
      - I
      - aT
      - M
      - TR
      - T*aT
      type: string
    CausaliOperazioneCs:
      enum:
      - Carico
      - Scarico
      - CaricoScarico
      type: string
    CausaliRespingimento:
      enum:
      - NC
      - IR
      - A
      type: string
    CittaBaseModel:
      type: object
      description: Città estera o comune Italiano
    CittaEsteraModel:
      title: CittaEsteraModel
      required:
      - nazione_id
      - nome_citta
      type: object
      allOf:
      - $ref: '#/components/schemas/CittaBaseModel'
      properties:
        nazione_id:
          maxLength: 2
          minLength: 1
          pattern: ^(?!.*[Ii][Tt]).*$
          type: string
          description: >-
            Codice ISO 3166-1 alpha-2 della nazione, in caso di "IT" è possibile omettere.


            Vengono accettati solo codici previsti dallo standard ISO 3166-1 alpha-2.


            Vedi API di codifica: <i>GET /codifiche/v1.0/nazioni</i>
        nome_citta:
          maxLength: 100
          minLength: 1
          type: string
          description: Città estera
      description: Città estera
    ComuneModel:
      title: ComuneModel
      required:
      - comune_id
      type: object
      allOf:
      - $ref: '#/components/schemas/CittaBaseModel'
      properties:
        comune_id:
          maxLength: 6
          minLength: 1
          type: string
          description: >-
            Comune ISTAT del comune.


            Non vengono accettati codici non corrispondenti a codici ISTAT di comuni italiani.


            Vedi API di codifica: <i>GET /codifiche/v1.0/comuni</i>
      description: Comune Italiano
    DatiDestinatarioModel:
      required:
      - codice_fiscale
      - denominazione
      type: object
      properties:
        denominazione:
          maxLength: 255
          minLength: 1
          type: string
          description: Denominazione del soggetto
        codice_fiscale:
          maxLength: 20
          minLength: 5
          type: string
          description: Codice fiscale
        nazione_id:
          maxLength: 2
          type: string
          description: >-
            Codice ISO 3166-1 alpha-2 della nazione, in caso di "IT" è possibile omettere.


            Vengono accettati solo codici previsti dallo standard ISO 3166-1 alpha-2.


            Vedi API di codifica: <i>GET /codifiche/v1.0/nazioni</i>


            <i>Questo campo viene utilizzato esclusivamente per validare i dati di input in base alla nazione di appartenenza (non viene memorizzato e quindi restituito in output).</i>
          nullable: true
        num_autorizzazione:
          maxLength: 50
          type: string
          description: >-
            Numero autorizzazione.

            Non obbligatorio nel caso di destinatario estero, richiesto in caso contrario
          nullable: true
      additionalProperties: false
      description: Destinatario
    DatiEsitoModel:
      type: object
      properties:
        data_fine_trasporto:
          type: string
          description: Data di fine trasporto (formato ISO 8601 UTC)
          format: date-time
          nullable: true
        peso_verificato_destino:
          type: number
          description: 'Peso verificato a destino (parte intera: 10, parte decimale: 4) compreso tra 0.0000 e 9999999999.9999.'
          format: double
          nullable: true
        respingimento:
          allOf:
          - $ref: '#/components/schemas/DatiRespingimentoModel'
          description: Dati sul respingimento
          nullable: true
      additionalProperties: false
      description: Esito conferimento
    DatiIntegrazioneFirModel:
      type: object
      properties:
        numero_fir:
          maxLength: 20
          type: string
          description: Numero formulario
          nullable: true
        trasporto_transfrontaliero:
          type: boolean
          description: Trasporto transfrontaliero
          nullable: true
        tipo_trasporto_transfrontaliero:
          allOf:
          - $ref: '#/components/schemas/TipiTrasportoTransfrontaliero'
          description: >-
            Tipo trasporto transfrontaliero.


            Richiesto solamente se trasporto_transfrontaliero è uguale a true.

            Vedi API di codifica: <i>GET /codifiche/v1.0/tipi-trasporto-transfrontaliero</i><p>Valori ammessi:<ul style="margin:0"><li><i>DM</i> - Documento di movimento (Allegato I-B  al Regolamento 1013/06)</li><li><i>DA</i> - Documento di accompagnamento (Allegato VII – al Regolamento 1013/06)</li></ul></p>
          nullable: true
        data_inizio_trasporto:
          type: string
          description: Data inizio trasporto (formato ISO 8601 UTC)
          format: date-time
          nullable: true
      additionalProperties: false
      description: Integrazione FIR - Registro C/S
    DatiIntermediarioModel:
      required:
      - codice_fiscale
      - denominazione
      type: object
      properties:
        denominazione:
          maxLength: 255
          minLength: 1
          type: string
          description: Denominazione del soggetto
        codice_fiscale:
          maxLength: 20
          minLength: 5
          type: string
          description: Codice fiscale
        nazione_id:
          maxLength: 2
          type: string
          description: >-
            Codice ISO 3166-1 alpha-2 della nazione, in caso di "IT" è possibile omettere.


            Vengono accettati solo codici previsti dallo standard ISO 3166-1 alpha-2.


            Vedi API di codifica: <i>GET /codifiche/v1.0/nazioni</i>


            <i>Questo campo viene utilizzato esclusivamente per validare i dati di input in base alla nazione di appartenenza (non viene memorizzato e quindi restituito in output).</i>
          nullable: true
          deprecated: true
        num_iscrizione_albo:
          pattern: ^([A-Za-z]{2})/([0-9]{6})$
          type: string
          description: Numero di iscrizione all'Albo Nazionale Gestori Ambientali
          nullable: true
      additionalProperties: false
      description: Intermediario
    DatiMaterialiModel:
      required:
      - materiale
      type: object
      properties:
        materiale:
          allOf:
          - $ref: '#/components/schemas/Materiali'
          description: >-
            Materiale


            Vedi API di codifica: <i>GET /codifiche/v1.0/materiali</i><p>Valori ammessi:<ul style="margin:0"><li><i>ACV</i> - 1 - Ammendante compostato verde</li><li><i>ACM</i> - 2 - Ammendante compostato misto</li><li><i>AA</i> - 3 - Altri Ammendanti</li><li><i>DIG</i> - 4 - Digestato</li><li><i>AGG</i> - 5 - Aggregati riciclati</li><li><i>RA</i> - 6 - Rottami di alluminio</li><li><i>RV</i> - 7 - Rottami di vetro</li><li><i>RFA</i> - 8 - Rottami di ferro e acciaio</li><li><i>RR</i> - 9 - Rottami di rame</li><li><i>CC</i> - 10 - Carta e cartone</li><li><i>PLA</i> - 11 - Plastica</li><li><i>LS</i> - 12 - Legno e sughero</li><li><i>CSS</i> - 13 - CSS – combustibile</li><li><i>TE</i> - 14 - Tessili</li><li><i>GOM</i> - 15	- Gomma</li><li><i>CU</i> - 16 - Cuoio</li><li><i>MC</i> - 17 - Materiali ceramici</li><li><i>CF</i> - 18 - Correttivi da Fanghi</li><li><i>AF</i> - 19 - Altri Fertilizzanti</li><li><i>GCB</i> - 20 - Granulato di Conglomerato bituminoso</li><li><i>ASS</i> - 21 - Materiali secondari derivanti dal recupero di prodotti assorbenti per la persona</li><li><i>GMV</i> - 22 - Gomma vulcanizzata da PFU</li><li><i>A</i> - 23 - Altro</li></ul></p>
        descrizione_materiale:
          maxLength: 50
          type: string
          description: Descrizione materiale
          nullable: true
        quantita:
          allOf:
          - $ref: '#/components/schemas/UnitaMisuraPesoQuantitaModel'
          description: Quantità
          nullable: true
      additionalProperties: false
      description: Materiali (solo Impianti)
    DatiMovimentoModel:
      title: DatiMovimentoModel
      type: object
      properties:
        riferimenti:
          allOf:
          - $ref: '#/components/schemas/DatiRiferimentiCompletoModel'
          description: Riferimenti operazione
          nullable: true
        rifiuto:
          allOf:
          - $ref: '#/components/schemas/DatiRifiutoModel'
          description: >-
            Identificazione del rifiuto.


            Richiesto solamente se causale_operazione è diversa da "M".
          nullable: true
        materiali:
          allOf:
          - $ref: '#/components/schemas/DatiMaterialiModel'
          description: >-
            Materiali (solo impianti).


            Richiesto solamente se causale_operazione è uguale a "M".
          nullable: true
        integrazione_fir:
          allOf:
          - $ref: '#/components/schemas/DatiIntegrazioneFirModel'
          description: >-
            Integrazione FIR - Registro C/S.


            Non deve essere indicato se causale_operazione è diversa da "aT", "TR", "T*", "T*AT".
          nullable: true
        esito:
          allOf:
          - $ref: '#/components/schemas/DatiEsitoModel'
          description: >-
            Esito conferimento.


            Non deve essere indicato se causale_operazione è diversa da "aT", "T*AT".
          nullable: true
        produttore:
          allOf:
          - $ref: '#/components/schemas/DatiProduttoreModel'
          description: Produttore del rifiuto
          nullable: true
        trasportatore:
          allOf:
          - $ref: '#/components/schemas/DatiTrasportatoreModel'
          description: Trasportatore
          nullable: true
        destinatario:
          allOf:
          - $ref: '#/components/schemas/DatiDestinatarioModel'
          description: Destinatario
          nullable: true
        intermediario:
          allOf:
          - $ref: '#/components/schemas/DatiIntermediarioModel'
          description: "Intermediario\r\n \r\n⚠️ Deprecato: utilizzare \"Intermediari\""
          nullable: true
          deprecated: true
        intermediari:
          type: array
          items:
            $ref: '#/components/schemas/DatiIntermediarioModel'
          description: Intermediari
          nullable: true
        annotazioni:
          maxLength: 500
          type: string
          description: Annotazioni generiche
          nullable: true
        annullato:
          type: boolean
          description: Indica se il movimento è annullato
        rettificato:
          type: boolean
          description: Indica se il movimento è rettificato
      description: Dati della registrazione (modello utilizzato in output)
    DatiProduttoreModel:
      required:
      - indirizzo
      type: object
      properties:
        denominazione:
          maxLength: 255
          type: string
          description: Denominazione del soggetto
          nullable: true
        codice_fiscale:
          maxLength: 20
          minLength: 5
          type: string
          description: Codice fiscale
          nullable: true
        nazione_id:
          maxLength: 2
          type: string
          description: >-
            Codice ISO 3166-1 alpha-2 della nazione, in caso di "IT" è possibile omettere.


            Vengono accettati solo codici previsti dallo standard ISO 3166-1 alpha-2.


            Vedi API di codifica: <i>GET /codifiche/v1.0/nazioni</i>


            <i>Questo campo viene utilizzato esclusivamente per validare i dati di input in base alla nazione di appartenenza (non viene memorizzato e quindi restituito in output).</i>
          nullable: true
          deprecated: true
        indirizzo:
          allOf:
          - $ref: '#/components/schemas/IndirizzoModel'
          description: Indirizzo
      additionalProperties: false
      description: Produttore
    DatiRespingimentoModel:
      required:
      - tipo
      type: object
      properties:
        tipo:
          allOf:
          - $ref: '#/components/schemas/TipiRespingimento'
          description: >-
            Tipologia di respingimento


            Vedi API di codifica: <i>GET /codifiche/v1.0/tipi-respingimento</i><p>Valori ammessi:<ul style="margin:0"><li><i>T</i> - Totale</li><li><i>P</i> - Parziale</li></ul></p>
        quantita:
          allOf:
          - $ref: '#/components/schemas/UnitaMisuraQuantitaModel'
          description: Quantità respinta
          nullable: true
        causale:
          allOf:
          - $ref: '#/components/schemas/CausaliRespingimento'
          description: >-
            Causale del respingimento


            Vedi API di codifica: <i>GET /codifiche/v1.0/causali-respingimento</i><p>Valori ammessi:<ul style="margin:0"><li><i>NC</i> - Non Conformità, a titolo esemplificativo e non esaustivo, si riporta: rifiuti diverso da quello descritto dal formulario o da quanto dichiarato ai fini della pratica di conferimento all'impianto, rifiuto confezionato in modo non conforme da quanto previsto per la specifica destinazione o dalle norme applicabili, di stato fisico diverso da quello previsto)</li><li><i>IR</i> - Irricevibile, (a titolo esemplificativo e non esaustivo, si riporta: rifiuto non previsto dall'autorizzazione / iscrizione dell'impianto di destino, mancanza dei requisiti per l'ammissibilità all'impianto quali caratterizzazione di base, analisi di classificazione o di ammissibilità…)</li><li><i>A</i> - Indicare motivazione. A titolo esemplificativo e non esaustivo, si riporta: esaurimento volumetria disponibile per conferimento rifiuto, chiusura impianto per manutenzione straordinaria, ecc.</li></ul></p>
          nullable: true
        causale_altro:
          maxLength: 50
          type: string
          description: >-
            Altra tipologia di causale non prevista.


            Richiesto solamente se causale è uguale a "A".
          nullable: true
      additionalProperties: false
      description: Respingimento
    DatiRiferimentiBaseModel:
      required:
      - data_ora_registrazione
      - numero_registrazione
      type: object
      properties:
        numero_registrazione:
          oneOf:
          - $ref: '#/components/schemas/AnnoProgressivoMovimentoModel'
          - $ref: '#/components/schemas/IdentificativoMovimentoModel'
          description: Numero registrazione della registrazione tramite anno e progressivo oppure identificativo rilasciato dal RENTRI
        data_ora_registrazione:
          type: string
          description: >-
            Data di registrazione (formato ISO 8601 UTC) come previsto nel modello di registro RENTRI.

            In caso di rettifica, è la data di registrazione della registrazione rettificata.


            Trattandosi di una registrazione informatica, è consentito indicare l'ora, anche se non obbligatoria.


            <b>Esempi:</b> solo data = "2024-01-01", data con ora = "2024-01-01T12:00:00Z"
          format: date-time
        causale_operazione:
          allOf:
          - $ref: '#/components/schemas/CausaliOperazione'
          description: >-
            Causale dell'operazione.


            Non richiesto solo nel caso di stoccaggio istantaneo (o giacenza).


            Vedi API di codifica: <i>GET /codifiche/v1.0/causali-operazione</i><p>Valori ammessi:<ul style="margin:0"><li><i>DT</i> - Prodotto o detenuto nell'unità locale</li><li><i>NP</i> - Nuovo produttore</li><li><i>T*</i> - Ricevuto da terzi</li><li><i>RE</i> - Prodotto al di fuori dell’unità locale</li><li><i>I</i> - Scarico interno</li><li><i>aT</i> - Scarico a terzi</li><li><i>M</i> - Scarico per produzione di materiali</li><li><i>TR</i> - Intermediario</li><li><i>T*aT</i> - Carico e scarico</li></ul></p>
          nullable: true
        stoccaggio_istantaneo:
          type: string
          description: Data dello stoccaggio istantaneo (formato ISO 8601 UTC) (o giacenza), se valorizzata possono essere compilati solamente i dati relativi al rifiuto e non al materiale.
          format: date-time
          nullable: true
        numero_registrazione_rettifica:
          oneOf:
          - $ref: '#/components/schemas/AnnoProgressivoMovimentoModel'
          - $ref: '#/components/schemas/IdentificativoMovimentoModel'
          description: Numero registrazione della registrazione rettificata
          nullable: true
        riferimento_operazione:
          type: array
          items:
            oneOf:
            - $ref: '#/components/schemas/AnnoProgressivoMovimentoModel'
            - $ref: '#/components/schemas/IdentificativoMovimentoModel'
            description: Dati di identificazione della registrazione tramite anno di riferimento e progressivo oppure identificativo rilasciato dal RENTRI
          description: Registrazioni associate
          nullable: true
      additionalProperties: false
      description: Riferimenti dell'operazione
    DatiRiferimentiCompletoModel:
      required:
      - data_ora_registrazione
      type: object
      properties:
        numero_registrazione:
          title: IdentificativoMovimentoCompletoModel
          allOf:
          - $ref: '#/components/schemas/IdentificativoMovimentoCompletoModel'
          description: Numero registrazione della registrazione tramite anno e progressivo e identificativo rilasciato dal RENTRI
          nullable: true
        data_ora_registrazione:
          type: string
          description: >-
            Data di registrazione (formato ISO 8601 UTC) come previsto nel modello di registro RENTRI.

            In caso di rettifica, è la data di registrazione della registrazione rettificata.


            Trattandosi di una registrazione informatica, è consentito indicare l'ora, anche se non obbligatoria.


            <b>Esempi:</b> solo data = "2024-01-01", data con ora = "2024-01-01T12:00:00Z"
          format: date-time
        numero_registrazione_di_rettifica:
          title: IdentificativoMovimentoCompletoModel
          allOf:
          - $ref: '#/components/schemas/IdentificativoMovimentoCompletoModel'
          description: Numero della registrazione della rettifica
          nullable: true
        numero_registrazione_rettifica:
          title: IdentificativoMovimentoCompletoModel
          allOf:
          - $ref: '#/components/schemas/IdentificativoMovimentoCompletoModel'
          description: Numero della registrazione rettificata
          nullable: true
        causale_operazione_cs:
          allOf:
          - $ref: '#/components/schemas/CausaliOperazioneCs'
          description: Causale dell'operazione Carico/Scarico<p>Valori ammessi:<ul style="margin:0"><li><i>Carico</i> - Carico</li><li><i>Scarico</i> - Scarico</li><li><i>CaricoScarico</i> - Carico e scarico</li></ul></p>
          nullable: true
        causale_operazione:
          allOf:
          - $ref: '#/components/schemas/CausaliOperazione'
          description: >-
            Causale dell'operazione.


            Non richiesto solo nel caso di stoccaggio istantaneo (o giacenza).


            Vedi API di codifica: <i>GET /codifiche/v1.0/causali-operazione</i><p>Valori ammessi:<ul style="margin:0"><li><i>DT</i> - Prodotto o detenuto nell'unità locale</li><li><i>NP</i> - Nuovo produttore</li><li><i>T*</i> - Ricevuto da terzi</li><li><i>RE</i> - Prodotto al di fuori dell’unità locale</li><li><i>I</i> - Scarico interno</li><li><i>aT</i> - Scarico a terzi</li><li><i>M</i> - Scarico per produzione di materiali</li><li><i>TR</i> - Intermediario</li><li><i>T*aT</i> - Carico e scarico</li></ul></p>
          nullable: true
        stoccaggio_istantaneo:
          type: string
          description: Data dello stoccaggio istantaneo (formato ISO 8601 UTC) (o giacenza), se valorizzata possono essere compilati solamente i dati relativi al rifiuto e non al materiale.
          format: date-time
          nullable: true
        riferimenti_operazione:
          type: array
          items:
            $ref: '#/components/schemas/MovimentoAssociatoModel'
          description: "Registrazioni associate\r\n \r\n⚠️ Deprecato: utilizzare \"riferimento_operazione\""
          nullable: true
          readOnly: true
          deprecated: true
        riferimento_operazione:
          type: array
          items:
            $ref: '#/components/schemas/MovimentoAssociatoModel'
          description: Registrazioni associate
          nullable: true
          readOnly: true
        identificativo_registro:
          type: string
          description: Identificativo del registro
          nullable: true
        num_iscr_sito:
          type: string
          description: Numero iscrizione unità locale rilasciato all'iscrizione
          nullable: true
        data_creazione:
          type: string
          description: Data di creazione della registrazione in RENTRI (formato ISO 8601 UTC)
          format: date-time
        data_trasmissione:
          type: string
          description: Data di trasmissione della registrazione a RENTRI (formato ISO 8601 UTC)
          format: date-time
        data_inizio_validita:
          type: string
          description: Data di inizio validità della posizione (formato ISO 8601 UTC)
          format: date-time
        data_fine_validita:
          type: string
          description: Data di fine validità della posizione (formato ISO 8601 UTC)
          format: date-time
      additionalProperties: false
      description: Riferimenti dell'operazione (modello utilizzato in output)
    DatiRiferimentiModel:
      required:
      - data_ora_registrazione
      - numero_registrazione
      type: object
      properties:
        numero_registrazione:
          title: AnnoProgressivoMovimentoModel
          allOf:
          - $ref: '#/components/schemas/AnnoProgressivoMovimentoModel'
          description: Numero registrazione della registrazione tramite anno e progressivo
        data_ora_registrazione:
          type: string
          description: >-
            Data di registrazione (formato ISO 8601 UTC) come previsto nel modello di registro RENTRI.

            In caso di rettifica, è la data di registrazione della registrazione rettificata.


            Trattandosi di una registrazione informatica, è consentito indicare l'ora, anche se non obbligatoria.


            <b>Esempi:</b> solo data = "2024-01-01", data con ora = "2024-01-01T12:00:00Z"
          format: date-time
        causale_operazione:
          allOf:
          - $ref: '#/components/schemas/CausaliOperazione'
          description: >-
            Causale dell'operazione.


            Non richiesto solo nel caso di stoccaggio istantaneo (o giacenza).


            Vedi API di codifica: <i>GET /codifiche/v1.0/causali-operazione</i><p>Valori ammessi:<ul style="margin:0"><li><i>DT</i> - Prodotto o detenuto nell'unità locale</li><li><i>NP</i> - Nuovo produttore</li><li><i>T*</i> - Ricevuto da terzi</li><li><i>RE</i> - Prodotto al di fuori dell’unità locale</li><li><i>I</i> - Scarico interno</li><li><i>aT</i> - Scarico a terzi</li><li><i>M</i> - Scarico per produzione di materiali</li><li><i>TR</i> - Intermediario</li><li><i>T*aT</i> - Carico e scarico</li></ul></p>
          nullable: true
        stoccaggio_istantaneo:
          type: string
          description: Data dello stoccaggio istantaneo (formato ISO 8601 UTC) (o giacenza), se valorizzata possono essere compilati solamente i dati relativi al rifiuto e non al materiale.
          format: date-time
          nullable: true
        numero_registrazione_rettifica:
          oneOf:
          - $ref: '#/components/schemas/AnnoProgressivoMovimentoModel'
          - $ref: '#/components/schemas/IdentificativoMovimentoModel'
          description: Numero registrazione della registrazione rettificata
          nullable: true
        riferimento_operazione:
          type: array
          items:
            oneOf:
            - $ref: '#/components/schemas/AnnoProgressivoMovimentoModel'
            - $ref: '#/components/schemas/IdentificativoMovimentoModel'
            description: Dati di identificazione della registrazione tramite anno di riferimento e progressivo oppure identificativo rilasciato dal RENTRI
          description: Registrazioni associate
          nullable: true
      additionalProperties: false
      description: Riferimenti dell'operazione
    DatiRifiutoModel:
      required:
      - codice_eer
      - quantita
      - stato_fisico
      type: object
      properties:
        codice_eer:
          maxLength: 6
          minLength: 1
          type: string
          description: >-
            Codice EER.


            Codice numerico di 6 caratteri che identifica il rifiuto in base alla Lista Europea dei Rifiuti (European Waste List - EWL), 

            vengono accettati solo codici EER validi e presenti nella lista ufficiale, senza alcun carattere separatore.


            Vedi API di codifica: <i>GET /codifiche/v1.0/codici-eer</i>
        descrizione_eer:
          maxLength: 250
          type: string
          description: Descrizione del rifiuto, richiesta se il Codice EER specificato è di tipo .99
          nullable: true
        provenienza:
          allOf:
          - $ref: '#/components/schemas/ProvenienzaRifiuto'
          description: >-
            Provenienza


            Vedi API di codifica: <i>GET /codifiche/v1.0/provenienza</i><p>Valori ammessi:<ul style="margin:0"><li><i>U</i> - Urbano</li><li><i>S</i> - Speciale</li></ul></p>
          nullable: true
        caratteristiche_pericolo:
          type: array
          items:
            $ref: '#/components/schemas/CaratteristichePericolo'
          description: >-
            Caratteristiche di pericolo (HP)


            Vedi API di codifica: <i>GET /codifiche/v1.0/caratteristiche-pericolo</i><p>Valori ammessi:<ul style="margin:0"><li><i>HP01</i> - Esplosivo</li><li><i>HP02</i> - Comburente</li><li><i>HP03</i> - Infiammabile</li><li><i>HP04</i> - Irritante - Irritazione cutanea e lesioni oculari</li><li><i>HP05</i> - Tossicità specifica per organi bersaglio (STOT)/Tossicità in caso di respirazione</li><li><i>HP06</i> - Tossicità acuta</li><li><i>HP07</i> - Cancerogeno</li><li><i>HP08</i> - Corrosivo</li><li><i>HP09</i> - Infettivo</li><li><i>HP10</i> - Tossico per la riproduzione</li><li><i>HP11</i> - Mutageno</li><li><i>HP12</i> - Liberazione di gas a tossicità acuta</li><li><i>HP13</i> - Sensibilizzante</li><li><i>HP14</i> - Ecotossico</li><li><i>HP15</i> - Rifiuto che non possiede direttamente una delle caratteristiche di pericolo già menzionate, ma può manifestarla successivamente</li></ul></p>
          nullable: true
        stato_fisico:
          allOf:
          - $ref: '#/components/schemas/StatiFisici'
          description: >-
            Stato fisico


            Vedi API di codifica: <i>GET /codifiche/v1.0/stati-fisici</i><p>Valori ammessi:<ul style="margin:0"><li><i>SP</i> - In polvere o pulverulento</li><li><i>S</i> - Solido</li><li><i>FP</i> - Fangoso</li><li><i>L</i> - Liquido</li><li><i>VS</i> - Vischioso sciropposo</li></ul></p>
        quantita:
          allOf:
          - $ref: '#/components/schemas/UnitaMisuraQuantitaModel'
          description: Quantità
        destinato_attivita:
          allOf:
          - $ref: '#/components/schemas/DestinazioniRifiuto'
          description: >-
            Destinato a


            Vedi API di codifica: <i>GET /codifiche/v1.0/attivita-rs</i><p>Valori ammessi:<ul style="margin:0"><li><i>R1</i> - Utilizzazione principale come combustibile o come altro mezzo per produrre energia</li><li><i>R2</i> - Rigenerazione/recupero di solventi</li><li><i>R3</i> - Riciclo/recupero delle sostanze organiche non utilizzate come solventi</li><li><i>R4</i> - Riciclo/recupero dei metalli e dei composti metallici</li><li><i>R5</i> - Riciclo/recupero di altre sostanze inorganiche</li><li><i>R6</i> - Rigenerazione degli acidi o delle basi</li><li><i>R7</i> - Recupero dei prodotti che servono a captare gli inquinanti</li><li><i>R8</i> - Recupero dei prodotti provenienti dai catalizzatori</li><li><i>R9</i> - Rigenerazione o altri reimpieghi degli oli</li><li><i>R10</i> - Spandimento sul suolo a beneficio dell'agricoltura o dell'ecologia</li><li><i>R11</i> - Utilizzazione di rifiuti ottenuti da una delle operazioni indicate da R1 a R10</li><li><i>R12</i> - Scambio di rifiuti per sottoporli a una delle operazioni indicate da R1 a R11</li><li><i>R13</i> - Messa in riserva di rifiuti per sottoporli a una delle operazioni indicate nei punti da R1 a R12</li><li><i>D1</i> - Deposito sul o nel suolo</li><li><i>D2</i> - Trattamento in ambiente terrestre</li><li><i>D3</i> - Iniezioni in profondità</li><li><i>D4</i> - Lagunaggio</li><li><i>D5</i> - Messa in discarica specialmente allestita</li><li><i>D6</i> - Scarico dei rifiuti solidi nell'ambiente idrico eccetto l'immersione</li><li><i>D7</i> - Immersione, compreso il seppellimento nel sottosuolo marino</li><li><i>D8</i> - Trattamento biologico non specificato altrove nel presente allegato</li><li><i>D9</i> - Trattamento fisico-chimico non specificato altrove nel presente allegato</li><li><i>D10</i> - Incenerimento a terra</li><li><i>D11</i> - Incenerimento in mare</li><li><i>D12</i> - Deposito permanente</li><li><i>D13</i> - Raggruppamento preliminare prima di una delle operazioni di cui ai punti da D1 a D12</li><li><i>D14</i> - Ricondizionamento preliminare prima di una delle operazioni di cui ai punti da D1 a D13</li><li><i>D15</i> - Deposito preliminare prima di una delle operazioni di cui ai punti da D1 a D14</li><li><i>CR</i> - Centro di raccolta</li></ul></p>
          nullable: true
        categorie_aee:
          type: array
          items:
            $ref: '#/components/schemas/CategorieAee'
          description: >-
            Categoria AEE


            Vedi API di codifica: <i>GET /codifiche/v1.0/categorie-raee</i><p>Valori ammessi:<ul style="margin:0"><li><i>Cat1</i> - Apparecchiature per lo scambio di temperatura.</li><li><i>Cat2</i> - Schermi, monitor ed apparecchiature dotate di schermi con una superficie superiore a 100 cm2.</li><li><i>Cat3</i> - Lampade.</li><li><i>Cat4</i> - Apparecchiature di grandi dimensioni (con almeno una dimensione esterna superiore a 50 cm). Questa categoria non include le apparecchiature appartenenti alle categorie 1, 2 e 3.</li><li><i>Cat5</i> - Apparecchiature di piccole dimensioni (con nessuna dimensione esterna superiore a 50 cm). Questa categoria non include le apparecchiature appartenenti alle categorie 1, 2, 3 e 6.</li><li><i>Cat6</i> - Piccole apparecchiature informatiche e per telecomunicazioni (con nessuna dimensione esterna superiore a 50 cm).</li><li><i>PF</i> - Pannelli fotovoltaici</li></ul></p>
          nullable: true
        veicolo_fuori_uso:
          type: boolean
          description: Veicoli fuori uso
          nullable: true
        veicolo_fuori_uso_reg_pubblica_sicurezza:
          allOf:
          - $ref: '#/components/schemas/VeicoloFuoriUsoRegPubblicaSicurezzaModel'
          description: >-
            Registro pubblica sicurezza.


            Richiesto solamente se veicolo_fuori_uso è uguale a true.
          nullable: true
      additionalProperties: false
      description: Identificazione del rifiuto
    DatiTrasportatoreModel:
      required:
      - codice_fiscale
      - denominazione
      type: object
      properties:
        denominazione:
          maxLength: 255
          minLength: 1
          type: string
          description: Denominazione del soggetto
        codice_fiscale:
          maxLength: 20
          minLength: 5
          type: string
          description: Codice fiscale
        nazione_id:
          maxLength: 2
          type: string
          description: >-
            Codice ISO 3166-1 alpha-2 della nazione, in caso di "IT" è possibile omettere.


            Vengono accettati solo codici previsti dallo standard ISO 3166-1 alpha-2.


            Vedi API di codifica: <i>GET /codifiche/v1.0/nazioni</i>


            <i>Questo campo viene utilizzato esclusivamente per validare i dati di input in base alla nazione di appartenenza (non viene memorizzato e quindi restituito in output).</i>
          nullable: true
          deprecated: true
        num_iscrizione_albo:
          pattern: ^([A-Za-z]{2})/([0-9]{6})$
          type: string
          description: Numero di iscrizione all'Albo Nazionale Gestori Ambientali
          nullable: true
      additionalProperties: false
      description: Trasportatore
    DestinazioniRifiuto:
      enum:
      - R1
      - R2
      - R3
      - R4
      - R5
      - R6
      - R7
      - R8
      - R9
      - R10
      - R11
      - R12
      - R13
      - D1
      - D2
      - D3
      - D4
      - D5
      - D6
      - D7
      - D8
      - D9
      - D10
      - D11
      - D12
      - D13
      - D14
      - D15
      - CR
      type: string
    EsitoMessaggioModel:
      type: object
      properties:
        indice:
          type: integer
          description: Indice dell'elemento di input relativo al messaggio di validazione
          format: int32
          nullable: true
        campo:
          type: string
          description: Campo dell'elemento di input relativo al messaggio di validazione
          nullable: true
        tipo:
          allOf:
          - $ref: '#/components/schemas/EsitoMessaggioTipo'
          description: Tipo del messaggio (avvertimento o errore)
        codice_messaggio:
          type: string
          description: Codice del messaggio
          nullable: true
        parametri:
          type: array
          items: {}
          description: Parametri del messaggio
          nullable: true
      additionalProperties: false
      description: Messaggio di validazione
    EsitoMessaggioTipo:
      enum:
      - Errore
      - Avvertimento
      type: string
    EsitoMovimentiBaseModel:
      type: object
      properties:
        transazione_id:
          type: string
          description: Identificativo della transazione asincrona
          format: uuid
        validazione:
          type: array
          items:
            $ref: '#/components/schemas/EsitoMessaggioModel'
          description: Messaggi di validazione
          nullable: true
        errore:
          type: boolean
          readOnly: true
        tempo_elaborazione:
          type: string
          format: date-span
          nullable: true
    EsitoMovimentiDataModel:
      type: object
      properties:
        identificativo_registro:
          type: string
          description: Identificativo del registro
          nullable: true
        numero_registrazioni:
          type: array
          items:
            $ref: '#/components/schemas/IdentificativoMovimentoCompletoModel'
          description: Elenco degli identificativi delle registrazioni
          nullable: true
      additionalProperties: false
    EsitoMovimentiModel:
      title: EsitoMovimentiModel
      type: object
      allOf:
      - $ref: '#/components/schemas/EsitoMovimentiBaseModel'
      properties:
        esito:
          allOf:
          - $ref: '#/components/schemas/EsitoMovimentiDataModel'
          description: Dati dell'esito della registrazione
          nullable: true
      description: Esito trasmissione della registrazione
    EsitoValidaRegistroDataModel:
      type: object
      properties:
        identificativo_registro:
          type: string
          description: Identificativo del registro
          nullable: true
        num_iscr_operatore:
          type: string
          description: Numero di iscrizione dell'operatore
          nullable: true
        codice_fiscale_operatore:
          type: string
          description: Codice fiscale dell'operatore
          nullable: true
        denominazione_operatore:
          type: string
          description: Ragione sociale dell'operatore
          nullable: true
        num_iscr_soggetto_delegato:
          type: string
          description: Numero di iscrizione del soggetto delegato
          nullable: true
        codice_fiscale_soggetto_delegato:
          type: string
          description: Codice fiscale del soggetto delegato
          nullable: true
        denominazione_soggetto_delegato:
          type: string
          description: Ragione sociale del soggetto delegato
          nullable: true
        num_iscr_sito:
          type: string
          description: Numero di iscrizione dell'unità locale
          nullable: true
        indirizzo_sito:
          type: string
          description: Indirizzo dell'unità locale
          nullable: true
        data_vidimazione:
          type: string
          description: Data di vidimazione del registro informatico
          format: date-time
          nullable: true
        cciaa:
          type: string
          description: Camera di commercio di appartenenza del registro informatico
          nullable: true
        identificativo_firma:
          type: string
          description: Identificativo del soggetto che ha firmato il registro informatico
          nullable: true
        denominazione_firma:
          type: string
          description: Denominazione del soggetto che ha firmato il registro informatico
          nullable: true
        ca_firma:
          type: string
          description: CA della firma del soggetto che ha firmato il registro informatico
          nullable: true
        firma_non_etsi:
          type: boolean
          description: True se la firma non è XAdES
          nullable: true
        numero_esportazioni_totali:
          type: integer
          description: Numero totale di esportazioni effettuate
          format: int32
          nullable: true
        numero_esportazioni_file:
          type: integer
          description: Numero di esportazioni presenti nel file
          format: int32
          nullable: true
        numero_registrazioni_file:
          type: integer
          description: Numero di registrazioni presenti nel file
          format: int32
          nullable: true
        numero_registrazioni_rentri:
          type: integer
          description: Numero di registrazioni presenti in RENTRI
          format: int32
          nullable: true
        numero_registrazioni_ultima_esportazione:
          type: integer
          description: Numero di registrazioni presenti nell'ultima esportazione
          format: int32
          nullable: true
        data_ultima_esportazione:
          type: string
          description: Data dell'ultima esportazione effettuata
          format: date-time
          nullable: true
        ultimo_anno_progressivo_esportato:
          type: string
          description: Ultimo progressivo esportato
          nullable: true
      additionalProperties: false
    EsitoValidaRegistroModel:
      title: EsitoValidaRegistroModel
      type: object
      allOf:
      - $ref: '#/components/schemas/EsitoMovimentiBaseModel'
      properties:
        esito:
          allOf:
          - $ref: '#/components/schemas/EsitoValidaRegistroDataModel'
          description: Dati dell'esito validazione
          nullable: true
      description: >+
        Esito validazione strutturale del registro cronologico di carico e scarico digitale in formato XML.



        L'array ```validazione``` contiene i codici di errore e/o avvertimento relativi alla validazione del file XML.


        I messaggi relativi ai codici di errori sono recuperabili dall'API di codifica

        ```GET /codifiche/v1.0/codici-errore```


        E' presente anche l'array ```parametri``` personalizzato in base al ```codice_messaggio```:


        - ```xmlRegistro.fileXmlNonValidoDettaglio```

          - 1️⃣ stringa con il dettaglio dell'errore riscontrato nel file XML

          - 2️⃣ array di oggetti con le seguenti proprietà:

            - ```linea```: numero di riga del file XML

            - ```posizione```: posizione all'interno della riga del file XML

            - ```tipo```: tipo di errore riscontrato (```Errore, Avviso```)

            - ```messaggio```: messaggio di errore riscontrato

        - ```xmlRegistro.firmaVidimazioneRegistroNonValidaDettaglio``` o ```xmlRegistro.firmaNonValidaDettaglio```

          - 1️⃣ stringa con il dettaglio dell'errore riscontrato nella firma

          - 2️⃣ array di oggetti con le seguenti proprietà:

            - ```codice```: codice dell'errore riscontrato nella firma (```ErroreNonDefinito, CertificatoScaduto, CertificatoRevocato, CertificatoAuthorityScaduto, AuthorityNonRiconosciuta, CertificatoNonAbilitato, FirmaCertificatoNonValida, CRLNonDisponibile, ErroreInterno, FirmaFileNonValida, AuthorityListNonDisponibile, CertificatoNonRiconosciuto, CertificatoNonDiFirma, FileNonFirmatoConSHA256, AuthoritySenzaCountryName```)

            - ```messaggio```: messaggio di errore riscontrato nella firma

        - ```xmlRegistro.datiMovimentoNonValidi```

          - 1️⃣ stringa contenente l'anno e il progressivo del movimento non valido

          - 2️⃣ oggetto con le seguenti proprietà:

            - ```anno```: anno del movimento non valido

            - ```progressivo```: progressivo del movimento non valido

            - ```validazione```: array di oggetti con le seguenti proprietà:

              - ```campo```: campo del movimento non valido

              - ```messaggio```: codice del messaggio di errore riscontrato

        - ```xmlRegistro.numeroRegistrazioniNonCorrispondente```, ```xmlRegistro.progressivoDaNonCorrispondente```, ```xmlRegistro.progressivoANonCorrispondente```, ```xmlRegistro.presentiSaltiNeiProgressivi```

          - 1️⃣ numero dell'elemento "Registrazioni" dove si riscontra la problematica.

        - ```xmlRegistro.datiMovimentoNonCorrispondenti```

          - 1️⃣ stringa contenente l'anno e il progressivo del movimento non corrispondente

          - 2️⃣ oggetto con le seguenti proprietà:

            - ```anno```: anno del movimento non corrispondente

            - ```progressivo```: progressivo del movimento non corrispondente

            - ```campi_non_corrispondenti```: lista di stringhe corrispondenti a campi relativi agli elementi XML dove si riscontra la non corrispondenza dei dati

        - ```xmlRegistro.registrazioniDaEsportare``` o ```xmlRegistro.registrazioniNonInRentri```

          - 1️⃣ stringa contenente l'anno e il progressivo iniziale

          - 2️⃣ stringa contenente l'anno e il progressivo finale

          - 3️⃣ oggetto con le seguenti proprietà:

            - ```anno```: anno del movimento

            - ```progressivo_da```: progressivo iniziale del movimento

            - ```progressivo_a```: progressivo finale del movimento
    IdentificativoMovimentoBaseModel:
      type: object
      description: Dati di identificazione della registrazione tramite anno di riferimento e progressivo oppure identificativo rilasciato dal RENTRI
    IdentificativoMovimentoCompletoModel:
      title: IdentificativoMovimentoCompletoModel
      type: object
      properties:
        anno:
          type: integer
          description: Anno di riferimento della registrazione
          format: int32
          nullable: true
        progressivo:
          type: integer
          description: Progressivo della registrazione
          format: int32
          nullable: true
        identificativo:
          type: string
          description: Identificativo RENTRI
          nullable: true
      description: Dati di identificazione della registrazione con anno/progressivo e identificativo rilasciato dal RENTRI (modello utilizzato in output)
    IdentificativoMovimentoModel:
      title: IdentificativoMovimentoModel
      required:
      - identificativo
      type: object
      allOf:
      - $ref: '#/components/schemas/IdentificativoMovimentoBaseModel'
      properties:
        identificativo:
          maxLength: 20
          minLength: 1
          pattern: ^M[0-9A-Z]{19}$
          type: string
          description: Identificativo RENTRI
      description: Dati di identificazione della registrazione tramite identificativo rilasciato dal RENTRI (da utilizzare in alternativa a anno di riferimento e progressivo)
    IndirizzoModel:
      required:
      - citta
      - indirizzo
      type: object
      properties:
        citta:
          oneOf:
          - $ref: '#/components/schemas/ComuneModel'
          - $ref: '#/components/schemas/CittaEsteraModel'
          description: Città estera o comune Italiano
        indirizzo:
          maxLength: 100
          minLength: 1
          type: string
          description: Indirizzo
        civico:
          maxLength: 20
          type: string
          description: Civico
          nullable: true
        cap:
          type: string
          description: CAP (se indirizzo italiano 5 cifre, altrimenti da 2 a 20 caratteri)
          nullable: true
      additionalProperties: false
      description: Indirizzo
    InfoTransazioneDettaglioModel:
      type: object
      properties:
        identificativo:
          type: string
          format: uuid
        tipo:
          allOf:
          - $ref: '#/components/schemas/TipoTransazione'
        identificativo_precedente:
          type: string
          format: uuid
          nullable: true
        data_trasmissione:
          type: string
          format: date-time
          nullable: true
        identificativo_entita:
          type: string
          nullable: true
        data_inizio_elaborazione:
          type: string
          format: date-time
          nullable: true
        data_fine_elaborazione:
          type: string
          format: date-time
          nullable: true
        status_code_push:
          type: integer
          format: int32
          nullable: true
        data_push:
          type: string
          format: date-time
          nullable: true
        data_ultimo_pull:
          type: string
          format: date-time
          nullable: true
        stato:
          allOf:
          - $ref: '#/components/schemas/StatoTransazione'
        sorgente:
          allOf:
          - $ref: '#/components/schemas/SorgenteTransazione'
        endpoint:
          type: string
          nullable: true
        identificativo_firmatario:
          type: string
          nullable: true
        num_iscr_operatore:
          type: string
          nullable: true
        identificativo_operatore:
          type: string
          nullable: true
        denominazione_operatore:
          type: string
          nullable: true
        num_iscr_sito:
          type: string
          nullable: true
        sito_comune_id:
          type: string
          nullable: true
        sito_provincia_id:
          type: string
          nullable: true
        sito_indirizzo:
          type: string
          nullable: true
        sito_civico:
          type: string
          nullable: true
        movimenti_info:
          type: array
          items:
            $ref: '#/components/schemas/MovimentoInfoModel'
          nullable: true
      additionalProperties: false
    InfoTransazioneModel:
      type: object
      properties:
        identificativo:
          type: string
          format: uuid
        tipo:
          allOf:
          - $ref: '#/components/schemas/TipoTransazione'
        identificativo_precedente:
          type: string
          format: uuid
          nullable: true
        data_trasmissione:
          type: string
          format: date-time
          nullable: true
        identificativo_entita:
          type: string
          nullable: true
        data_inizio_elaborazione:
          type: string
          format: date-time
          nullable: true
        data_fine_elaborazione:
          type: string
          format: date-time
          nullable: true
        status_code_push:
          type: integer
          format: int32
          nullable: true
        data_push:
          type: string
          format: date-time
          nullable: true
        data_ultimo_pull:
          type: string
          format: date-time
          nullable: true
        stato:
          allOf:
          - $ref: '#/components/schemas/StatoTransazione'
        sorgente:
          allOf:
          - $ref: '#/components/schemas/SorgenteTransazione'
        endpoint:
          type: string
          nullable: true
        identificativo_firmatario:
          type: string
          nullable: true
        num_iscr_operatore:
          type: string
          nullable: true
        identificativo_operatore:
          type: string
          nullable: true
        denominazione_operatore:
          type: string
          nullable: true
        num_iscr_sito:
          type: string
          nullable: true
        sito_comune_id:
          type: string
          nullable: true
        sito_provincia_id:
          type: string
          nullable: true
        sito_indirizzo:
          type: string
          nullable: true
        sito_civico:
          type: string
          nullable: true
      additionalProperties: false
    Materiali:
      enum:
      - ACV
      - ACM
      - AA
      - DIG
      - AGG
      - RA
      - RV
      - RFA
      - RR
      - CC
      - PLA
      - LS
      - CSS
      - TE
      - GOM
      - CU
      - MC
      - CF
      - AF
      - GCB
      - ASS
      - GMV
      - A
      type: string
    MovimentoAssociatoModel:
      title: MovimentoAssociatoModel
      type: object
      properties:
        anno:
          type: integer
          description: Anno di riferimento della registrazione
          format: int32
          nullable: true
        progressivo:
          type: integer
          description: Progressivo della registrazione
          format: int32
          nullable: true
        identificativo:
          type: string
          description: Identificativo RENTRI
          nullable: true
        associazione_diretta:
          type: boolean
          description: Specifica se l'associazione della registrazione è stata comunicata durante la trasmissione dello stesso (true), oppure se è stata ricostruita in base a trasmissioni successive (false)
        incompleto:
          type: boolean
          description: Specifica se della registrazione è incompleta (true), nel caso in cui sia stato derivato da un movimento associato trasmesso solamente come riferimento (anno/progressivo) di un altro movimento
      description: Dati di identificazione della registrazione associata con anno/progressivo e identificativo rilasciato RENTRI (modello utilizzato in output)
    MovimentoBaseModel:
      title: MovimentoBaseModel
      required:
      - riferimenti
      type: object
      allOf:
      - $ref: '#/components/schemas/OperazioneMovimentoBaseModel'
      properties:
        riferimenti:
          allOf:
          - $ref: '#/components/schemas/DatiRiferimentiBaseModel'
          description: Riferimenti operazione
        rifiuto:
          allOf:
          - $ref: '#/components/schemas/DatiRifiutoModel'
          description: >-
            Identificazione del rifiuto.


            Richiesto solamente se causale_operazione è diversa da "M".
          nullable: true
        materiali:
          allOf:
          - $ref: '#/components/schemas/DatiMaterialiModel'
          description: >-
            Materiali (solo impianti).


            Richiesto solamente se causale_operazione è uguale a "M".
          nullable: true
        integrazione_fir:
          allOf:
          - $ref: '#/components/schemas/DatiIntegrazioneFirModel'
          description: >-
            Integrazione FIR - Registro C/S.


            Non deve essere indicato se causale_operazione è diversa da "aT", "TR", "T*", "T*AT".
          nullable: true
        esito:
          allOf:
          - $ref: '#/components/schemas/DatiEsitoModel'
          description: >-
            Esito conferimento.


            Non deve essere indicato se causale_operazione è diversa da "aT", "T*AT".
          nullable: true
        produttore:
          allOf:
          - $ref: '#/components/schemas/DatiProduttoreModel'
          description: Produttore del rifiuto
          nullable: true
        trasportatore:
          allOf:
          - $ref: '#/components/schemas/DatiTrasportatoreModel'
          description: Trasportatore
          nullable: true
        destinatario:
          allOf:
          - $ref: '#/components/schemas/DatiDestinatarioModel'
          description: Destinatario
          nullable: true
        intermediario:
          allOf:
          - $ref: '#/components/schemas/DatiIntermediarioModel'
          description: "Intermediario\r\n \r\n⚠️ Deprecato: utilizzare \"Intermediari\""
          nullable: true
          deprecated: true
        intermediari:
          type: array
          items:
            $ref: '#/components/schemas/DatiIntermediarioModel'
          description: Intermediari
          nullable: true
        annotazioni:
          maxLength: 500
          type: string
          description: Annotazioni generiche
          nullable: true
      description: Dati della registrazione
    MovimentoDettaglioModel:
      title: MovimentoDettaglioModel
      type: object
      properties:
        riferimenti:
          allOf:
          - $ref: '#/components/schemas/DatiRiferimentiCompletoModel'
          description: Riferimenti operazione
          nullable: true
        rifiuto:
          allOf:
          - $ref: '#/components/schemas/DatiRifiutoModel'
          description: >-
            Identificazione del rifiuto.


            Richiesto solamente se causale_operazione è diversa da "M".
          nullable: true
        materiali:
          allOf:
          - $ref: '#/components/schemas/DatiMaterialiModel'
          description: >-
            Materiali (solo impianti).


            Richiesto solamente se causale_operazione è uguale a "M".
          nullable: true
        integrazione_fir:
          allOf:
          - $ref: '#/components/schemas/DatiIntegrazioneFirModel'
          description: >-
            Integrazione FIR - Registro C/S.


            Non deve essere indicato se causale_operazione è diversa da "aT", "TR", "T*", "T*AT".
          nullable: true
        esito:
          allOf:
          - $ref: '#/components/schemas/DatiEsitoModel'
          description: >-
            Esito conferimento.


            Non deve essere indicato se causale_operazione è diversa da "aT", "T*AT".
          nullable: true
        produttore:
          allOf:
          - $ref: '#/components/schemas/DatiProduttoreModel'
          description: Produttore del rifiuto
          nullable: true
        trasportatore:
          allOf:
          - $ref: '#/components/schemas/DatiTrasportatoreModel'
          description: Trasportatore
          nullable: true
        destinatario:
          allOf:
          - $ref: '#/components/schemas/DatiDestinatarioModel'
          description: Destinatario
          nullable: true
        intermediario:
          allOf:
          - $ref: '#/components/schemas/DatiIntermediarioModel'
          description: "Intermediario\r\n \r\n⚠️ Deprecato: utilizzare \"Intermediari\""
          nullable: true
          deprecated: true
        intermediari:
          type: array
          items:
            $ref: '#/components/schemas/DatiIntermediarioModel'
          description: Intermediari
          nullable: true
        annotazioni:
          maxLength: 500
          type: string
          description: Annotazioni generiche
          nullable: true
        annullato:
          type: boolean
          description: Indica se il movimento è annullato
        rettificato:
          type: boolean
          description: Indica se il movimento è rettificato
        variazioni:
          type: array
          items:
            $ref: '#/components/schemas/DatiMovimentoModel'
          description: Variazioni
          nullable: true
      description: Dati della registrazione con storico
    MovimentoInfoModel:
      type: object
      properties:
        anno:
          type: integer
          format: int32
          nullable: true
        progressivo:
          type: integer
          format: int32
          nullable: true
        identificativo:
          type: string
          nullable: true
        data_ora_registrazione:
          type: string
          format: date-time
          nullable: true
      additionalProperties: false
    MovimentoModel:
      title: MovimentoModel
      required:
      - riferimenti
      type: object
      allOf:
      - $ref: '#/components/schemas/MovimentoBaseModel'
      properties:
        riferimenti:
          allOf:
          - $ref: '#/components/schemas/DatiRiferimentiModel'
          description: Riferimenti operazione
      description: Dati della registrazione
    OperazioneMovimentoBaseModel:
      type: object
      description: Dati della registrazione
    ProblemDetails:
      type: object
      properties:
        type:
          type: string
          nullable: true
        title:
          type: string
          nullable: true
        status:
          type: integer
          format: int32
          nullable: true
        detail:
          type: string
          nullable: true
        instance:
          type: string
          nullable: true
      additionalProperties: {}
    ProvenienzaRifiuto:
      enum:
      - U
      - S
      type: string
    SorgenteTransazione:
      enum:
      - Api
      - Scrivania
      type: string
    StatiEsitoConferimento:
      enum:
      - NonPresente
      - Accolto
      - Respinto
      - Qualunque
      type: string
    StatiFisici:
      enum:
      - SP
      - S
      - FP
      - L
      - VS
      type: string
    StatoTransazione:
      enum:
      - Annullata
      - InErrore
      - Nuova
      - Conclusa
      - InLavorazione
      - ConclusaComunicata
      - ErroreDiSistema
      type: string
    TipiRespingimento:
      enum:
      - T
      - P
      type: string
    TipiTrasportoTransfrontaliero:
      enum:
      - DM
      - DA
      type: string
    TipoTransazione:
      enum:
      - Movimenti
      - Formulari
      - ViViFIR
      - XmlCheck
      type: string
    TransazioneModel:
      type: object
      properties:
        transazione_id:
          type: string
          format: uuid
      additionalProperties: false
    TransazioneRequestDataModel:
      type: object
      properties:
        claims:
          type: string
          nullable: true
        headers:
          type: string
          nullable: true
        body:
          type: string
          nullable: true
      additionalProperties: false
    TransazioneRequestModel:
      type: object
      properties:
        identificativo_transazione:
          type: string
          format: uuid
        jti:
          type: string
          nullable: true
        issuer:
          type: string
          nullable: true
        date_time:
          type: string
          format: date-time
        endpoint:
          type: string
          nullable: true
        data:
          allOf:
          - $ref: '#/components/schemas/TransazioneRequestDataModel'
          nullable: true
      additionalProperties: false
    UnitaMisura:
      enum:
      - kg
      - l
      type: string
    UnitaMisuraPeso:
      enum:
      - kg
      type: string
    UnitaMisuraPesoQuantitaModel:
      required:
      - unita_misura
      - valore
      type: object
      properties:
        valore:
          type: number
          description: 'Quantità (parte intera: 10, parte decimale: 4) compresa tra 0.0000 e 9999999999.9999.'
          format: double
        unita_misura:
          allOf:
          - $ref: '#/components/schemas/UnitaMisuraPeso'
          description: >-
            Unità di misura della quantità


            Vedi API di codifica: <i>GET /codifiche/v1.0/unita-misura</i><p>Valori ammessi:<ul style="margin:0"><li><i>kg</i> - Chilogrammi</li></ul></p>
      additionalProperties: false
    UnitaMisuraQuantitaModel:
      required:
      - unita_misura
      - valore
      type: object
      properties:
        valore:
          type: number
          description: 'Quantità (parte intera: 10, parte decimale: 4) compresa tra 0.0000 e 9999999999.9999.'
          format: double
        unita_misura:
          allOf:
          - $ref: '#/components/schemas/UnitaMisura'
          description: >-
            Unità di misura della quantità


            Vedi API di codifica: <i>GET /codifiche/v1.0/unita-misura</i><p>Valori ammessi:<ul style="margin:0"><li><i>kg</i> - Chilogrammi</li><li><i>l</i> - Litri</li></ul></p>
      additionalProperties: false
    ValidaRegistroRequest:
      required:
      - file_content
      - mime
      - nome_file
      type: object
      properties:
        file_content:
          type: string
          description: Contenuto in Base64 del file XML, o del file ZIP contenente il file XML, del registro cronologico di carico e scarico digitale
          format: byte
        nome_file:
          minLength: 1
          type: string
          description: Nome del file
        mime:
          minLength: 1
          type: string
          description: Tipo MIME del file da caricare
      additionalProperties: false
      description: Richiesta per la validazione strutturale del registro cronologico di carico e scarico digitale in formato XML
    VeicoloFuoriUsoRegPubblicaSicurezzaModel:
      required:
      - numero
      type: object
      properties:
        numero:
          maxLength: 50
          minLength: 1
          type: string
          description: Numero reg. pubblica sicurezza
        data:
          type: string
          description: Data reg. pubblica sicurezza (formato ISO 8601 UTC)
          format: date-time
          nullable: true
      additionalProperties: false
      description: Registro pubblica sicurezza
  securitySchemes:
    Bearer:
      type: http
      description: Bearer JWT
      scheme: bearer
      bearerFormat: JWT
security:
- Bearer: []
tags:
- name: Operatore
- name: Soggetto delegato
